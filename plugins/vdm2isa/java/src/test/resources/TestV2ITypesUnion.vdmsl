module TestV2ITypesUnion
exports all
definitions

types
	--@NB VDM merges these two? i.e. widens to largest possible types?
	TUnion = nat | int;
	TUnion'= nat | real;
	
	--@NB but then not within structures
	TUnion2 = seq of nat | set of real;
	TUnion2'= seq of nat | seq of real;
	
	TBasic = nat;
	
	TBasic2 = TBasic
	inv t == t > 10;
	
	TUnion3 = TBasic2 | TUnion2;	
	
	-- this will be tricky: entails implicit union deconstruction for both cases :-(
	-- user defined union type invariants are better avoided! 
	TUnion4 = int | real
	inv u == u > 0;
	
	TUnion5 = int | nat
	inv u == u < 0;

	-- this will be tricky: entails is_ expr deconstruction over the union. Oh man. s
	--@NB this is not handled properly in VDMJ? 
	TUnion6 = int | nat
	inv u == (is_nat(u) => u > 0) and (is_int(u) => u < 0);

	TUnion6' = int | nat
	inv u == (is_int(u) => u < 0) and (is_nat(u) => u > 0);
	
functions
	f6: TUnion6 -> int
	f6(u) == u;

	f6': TUnion6' -> int
	f6'(u) == u;

end TestV2ITypesUnion

